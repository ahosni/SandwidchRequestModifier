<!DOCTYPE html>
<html ng-app="app">
<head>
    <meta charset="UTF-8">
    <title>Requester Options Page</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="../bower_components/bootstrap/dist/css/bootstrap.min.css">

    <!--fontawesome css-->
    <link rel="stylesheet" href="../bower_components/font-awesome/css/font-awesome.min.css">

    <!--app css-->
    <link rel="stylesheet" href="../css/main.css">


    <!-- jQuery first, then Bootstrap JS. -->
    <script src="../bower_components/jquery/dist/jquery.min.js"></script>
    <script src="../bower_components/bootstrap/dist/js/bootstrap.min.js"></script>


    <!-- angular v1 -->
    <script src="../bower_components/angular/angular.min.js"></script>

    <!--lib-->
    <script src="../node_modules/ua-parser-js/dist/ua-parser.min.js"></script>

    <!--angular app-->
    <script src="../js/app.js"></script>
    <script src="../js/mainCtrl.js"></script>

    <!--app-->
</head>

<body ng-controller="mainCtrl">


<div class="container m-t-1">

    <!--导航栏-->
    <nav class="navbar navbar-light bg-faded">
        <div class="nav navbar-nav">
            <a class="nav-item nav-link active" href="#">REQUESTER <span class="sr-only">(current)</span></a>


        </div>
        <form class="form-inline pull-xs-right">
            <a class="nav-item nav-link text-primary" href="#" ng-if="activeCase">
                Simulating: {{activeCase.name}} (#{{activeCase.caseId}})
            </a>
            <a class="nav-item nav-link text-info" href="#" ng-if="!activeCase">
                No active case.
            </a>
            <button class="btn btn-link text-danger"
                    ng-click="deactivateCase()" ng-disabled="(activeCase==undefined)">
                <i class="fa fa-stop"></i>
            </button>
        </form>
    </nav>

    <div class="row m-y-1">
        <!--左栏-->
        <div class="col-sm-3">

            <div class="row">
                <div class="col-sm-4 p-x-0">
                    <!--新建按钮-->
                    <button class="btn btn-link btn-block"
                            ng-click="createNewCase()">
                        <i class="fa fa-plus"></i>
                    </button>
                </div>

                <div class="col-sm-4 p-x-0">
                    <button class="btn btn-link btn-block"
                            ng-click="importCases()">
                        <i class="fa fa-upload"></i>
                    </button>
                </div>
                <div class="col-sm-4 p-x-0">
                    <button class="btn btn-link btn-block"
                            ng-click="exportCases()">
                        <i class="fa fa-download"></i>
                    </button>
                </div>
            </div>
            <hr>
            <div class="row simCase"
                 ng-repeat="onecase in cases"
                 ng-click="changeShowCase(onecase)">
                <div class="col-sm-8">
                    {{onecase.name}}
                </div>
                <!--激活按钮-->
                <div class="col-sm-1 text-success" ng-click="activateCase(onecase)"><i class="fa fa-play"></i></div>
                <!--删除按钮-->
                <div class="col-sm-1 text-danger" ng-click="removeCase(onecase.caseId)"><i class="fa fa-times"></i>
                </div>
            </div>
        </div>

        <!--中栏-->
        <div class="col-sm-9">
            <h4>
                <span class="label label-pill label-default"># {{showCase.caseId}}</span>
                {{showCase.name}}
                <!--保存按钮-->
                <button class="btn btn-link text-primary" ng-click="saveCase(showCase.caseId)" style="float: right">
                    <i class="fa fa-save"></i>
                </button>
            </h4>
            <hr>

            <!--UA-->
            <fieldset class="form-group">
                <label for="uaTextarea">User Agent</label>
                <textarea class="form-control text-breakall" id="uaTextarea" rows="2"
                          placeholder="using default user agent string"
                          ng-model="showCase.ua"
                          ng-change="parseAndUpdateUaInfo()"></textarea>
            </fieldset>

            <!--headers-->
            <fieldset class="form-group">
                <label for="headersTextarea">Headers</label>
                <textarea class="form-control text-breakall" id="headersTextarea" rows="8"
                          placeholder="key:value"
                          ng-model="showCase.headers"></textarea>
            </fieldset>

            <hr>

            <div>
                <h4>UA 信息 （仅供参考）</h4>
                <table class="table table-striped table-bordered">
                    <thead>
                    <tr>
                        <th>操作系统</th>
                        <th>浏览器</th>
                        <th>版本</th>
                        <th>内核</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td id="system">{{uaInfo.os.name}} {{uaInfo.os.version}}</td>
                        <td id="browser_name">{{uaInfo.browser.name}}</td>
                        <td id="browser_version">{{uaInfo.browser.version}}</td>
                        <td id="browser_engine">{{uaInfo.engine.name}} {{uaInfo.engine.version}}</td>
                    </tr>
                    </tbody>
                </table>
            </div>

            <!--header 信息-->
            <div>
                <h4>Header 信息</h4>
                <div ng-repeat="headerInfo in headersInfo">
                    <h6>{{headerInfo.headerName}} - {{headerInfo.headerDescription}}</h6>
                    <div ng-if="headerInfo.subFields">
                        <div class="row">
                            <div class="col-sm-2 text-breakall">字段</div>
                            <div class="col-sm-4 text-breakall">值</div>
                            <div class="col-sm-5 m-l-1 text-breakall">描述</div>
                        </div>
                        <div class="row"
                             ng-repeat="subField in headerInfo.subFields">
                            <div class="col-sm-2 text-breakall">{{subField.fieldName}}</div>
                            <div class="col-sm-4 text-breakall">{{subField.fieldValue}}</div>
                            <div class="col-sm-5 m-l-1 text-breakall">{{subField.fieldDescription}}</div>
                        </div>
                    </div>
                </div>
            </div>


        </div>

        <!--右栏-->
        <!--<div class="col-sm-3">-->
        <!--right-->
        <!--</div>-->
    </div>
</div>

<!--footer-->
<div class="mainFooter">
    <!--声明-->
    <p>
        Powered by Bowen Liang © 2016
        <!--Github stars-->
        <iframe src="https://ghbtns.com/github-btn.html?user=bowenliang123&repo=Requester&type=star&count=true"
                frameborder="0" scrolling="0" width="80px" height="20px"></iframe>
    </p>

    <!--相关跳转-->
    <div class="btn-group-sm" role="group" aria-label="Basic example">

        <!--Google Chrome Store-->
        <a type="button" class="btn btn-secondary btn-link"
           href="https://chrome.google.com/webstore/detail/" target="_blank">
            <i class="fa fa-chrome"></i>
            On Chrome Store
        </a>

        <!--Github 项目页面-->
        <a type="button" class="btn btn-secondary btn-link"
           href="https://github.com/bowenliang123/Requester" target="_blank">
            <i class="fa fa-github"></i>
            On Github
        </a>
    </div>
</div>

<!--hidden-->
<div hidden>
    <input type="file" id="uploadInput" accept="text/*">
</div>
</body>
</html>